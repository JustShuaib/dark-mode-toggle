<!DOCTYPE html>
<html lang="en" color-mode="light">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dark Mode Toggle</title>
    <!-- Font awesome -->
    <script
      src="https://kit.fontawesome.com/6f90bc1711.js"
      crossorigin="anonymous"
    ></script>
    <!-- End of Font awesome -->
    <style>
      /* Light Mode Styles */
      :root[color-mode="light"] {
        --body-bg: hsla(0, 0%, 69%, 0.548);
        --container-bg: rgb(223, 223, 223);
        --pry: hsl(0, 0%, 0%);
        --pry-cyan: hsl(100, 61%, 19%);
        --pry-die: hsl(100, 27%, 47%);
        --light-cyan: hsl(150, 34%, 45%);
      }

      /* Dark Mode Styles */
      :root[color-mode="dark"] {
        --body-bg: hsl(217.9, 23.5%, 15.9%);
        --container-bg: hsl(217, 19%, 24%);
        --pry: hsl(193, 38%, 86%);
        --pry-cyan: hsl(150, 100%, 66%);
        --pry-die: hsl(150, 100%, 66%);
        --light-cyan: hsl(150, 72%, 39%);
      }
      :root[color-mode="light"] .light-mode {
        display: none;
      }
      :root[color-mode="dark"] .dark-mode {
        display: none;
      }
      body {
        background-color: var(--body-bg);
      }
      .toggle-btn {
        position: absolute;
        top: 5%;
        right: 10%;
        border: none;
        cursor: pointer;
        font: inherit;
        background-color: unset;
        color: var(--pry);
      }
      .toggle-btn span {
        margin-right: 0.5rem;
      }
    </style>
  </head>
  <body>
    <button class="toggle-btn light-mode" aria-label="Toggle light mode">
      <span>Light Mode</span>
      <i class="fa-solid fa-moon"></i>
    </button>
    <button class="toggle-btn dark-mode" aria-label="Toggle dark mode">
      <span>Dark Mode</span>
      <i class="fa-solid fa-sun"></i>
    </button>
    <script>
      const toggleBtn = document.querySelectorAll(".toggle-btn");
      toggleBtn.forEach((btn) => {
        btn.addEventListener("click", toggleMode);
      });
      function toggleMode(e) {
        if (e.currentTarget.classList.contains("dark-mode")) {
          document.documentElement.setAttribute("color-mode", "dark");
          //Sets the user's preference in local storage
          localStorage.setItem("color-mode", "dark");
          return;
        }
        document.documentElement.setAttribute("color-mode", "light");

        // Sets the user's preference in local storage
        localStorage.setItem("color-mode", "light");
      }
      // This code assumes a Light Mode default
      if (
        /* This condition checks whether the user has set a site preference for dark mode OR a OS-level preference for Dark Mode AND no site preference */
        localStorage.getItem("color-mode") === "dark" ||
        (window.matchMedia("(prefers-color-scheme: dark)").matches &&
          !localStorage.getItem("color-mode"))
      ) {
        // if true, set the site to Dark Mode
        document.documentElement.setAttribute("color-mode", "dark");
      }
    </script>
  </body>
</html>
